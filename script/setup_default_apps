#!/usr/bin/env bash
set -euo pipefail

# setup_default_apps sets the default apps for specific UTI identifiers the way
# I want.
#
# See also:
# * https://developer.apple.com/documentation/uniformtypeidentifiers/uttype
# * `osascript -e 'id of app "Code"'` to get id of Visual Studio Code

duti -s com.microsoft.VSCode public.xml all
duti -s com.microsoft.VSCode public.shell-script all
duti -s com.microsoft.VSCode public.json all
duti -s com.google.Chrome com.adobe.pdf all

###
# Future idea: automate setup of default settings
###

# Finder: show hidden files by default
#defaults write com.apple.finder AppleShowAllFiles -bool true

# Finder: show all filename extensions
defaults write NSGlobalDomain AppleShowAllExtensions -bool true

# Finder: show status bar
defaults write com.apple.finder ShowStatusBar -bool true

# Finder: show path bar
defaults write com.apple.finder ShowPathbar -bool true

# Display full POSIX path as Finder window title
defaults write com.apple.finder _FXShowPosixPathInTitle -bool true

# Keep folders on top when sorting by name
defaults write com.apple.finder _FXSortFoldersFirst -bool true

# When performing a search, search the current folder by default
defaults write com.apple.finder FXDefaultSearchScope -string "SCcf"

# Disable the warning when changing a file extension
defaults write com.apple.finder FXEnableExtensionChangeWarning -bool false

# This works, but for changes to become effective, you need to re-login.
# See https://stackoverflow.com/q/3446128/7009800
# defaults write ~/Library/Preferences/.GlobalPreferences.plist 'com.apple.keyboard.fnState' -bool false

# defaults write "com.apple.finder" "NewWindowTargetPath" '"file:///Users/bartek/Downloads/"'
