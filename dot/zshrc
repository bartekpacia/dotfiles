# Path to your oh-my-zsh installation.
export ZSH="$HOME/.oh-my-zsh"
export ZSH_CONFIG="$HOME/.zshrc"
export ZSH_CUSTOM="$ZSH/custom"
export DOTFILES="$HOME/.dotfiles"

export MLH_AT_SYMBOL=" at "
export MLH_IN_SYMBOL=" in "
export MLH_ON_SYMBOL=" on "
export MLH_SHELL_SYMBOL="$ "

# GPG config (see https://help.github.com/en/github/authenticating-to-github/telling-git-about-your-signing-key)
export GPG_TTY=$(tty)

stty -echoctl

ZSH_THEME="mlh"

plugins=(
    git
    macos
    adb
    zsh-autosuggestions
    zsh-syntax-highlighting
    zsh-completions
)


if [ -d "$ZSH" ]; then
    source "$ZSH/oh-my-zsh.sh"
fi

# Dart
export PATH="$HOME/.pub-cache/bin:$PATH"

# Flutter (from fvm)
export PATH="/Users/bartek/fvm/default/bin:$PATH"

# Android
export ANDROID_SDK_ROOT="$HOME/androidsdk"
export PATH="$ANDROID_SDK_ROOT:$PATH"
export PATH="$ANDROID_SDK_ROOT/cmdline-tools/latest/bin:$PATH"
export PATH="$ANDROID_SDK_ROOT/cmdline-tools/latest/lib:$PATH"
export PATH="$ANDROID_SDK_ROOT/platform-tools:$PATH"
export PATH="$ANDROID_SDK_ROOT/emulator:$PATH"

# Raspberry Pi Pico
export PICO_SDK_PATH="$HOME/pico-sdk"

# Java
if [[ "$OSTYPE" == "linux-gnu"* ]]; then
    # on Linux
    export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64
    export PATH="$JAVA_HOME/bin:$PATH"
    elif [[ "$OSTYPE" == "darwin"* ]]; then
    # on macOS
    export JAVA_HOME="/Library/Java/JavaVirtualMachines/adoptopenjdk-11.jdk/Contents/Home"
    export PATH="$JAVA_HOME/bin:$PATH"
fi

# C
export MAKEFLAGS="-j 8"

# avr-gcc
export PATH="/usr/local/opt/avr-gcc@11/bin:$PATH"

# Python poetry
export PATH="$HOME/.local/bin:$PATH"

# Check if pyenv is installed
if [ -d "$HOME/.pyenv" ]; then
    eval "$(pyenv init --path)"
    eval "$(pyenv init -)"
fi
export PYTHONDONTWRITEBYTECODE=1

# Ruby

# Check if rbenv is installed
if [ -d "$HOME/.rbenv" ]; then
    export PATH="$HOME/.rbenv/bin:$PATH"
    eval "$(rbenv init -)"
fi

# Go

# when installed directly from the webpage (no thru the pkg manager)
export PATH="/usr/local/go/bin:$PATH"

# Rust
export PATH="$HOME/.cargo/bin:$PATH"


# nvm
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"  # This loads nvm
[ -s "$NVM_DIR/bash_completion" ] && \. "$NVM_DIR/bash_completion"  # This loads nvm bash_completion

# nvm (from Homebrew)
[ -s "/usr/local/opt/nvm/nvm.sh" ] && . "/usr/local/opt/nvm/nvm.sh"  # This loads nvm
[ -s "/usr/local/opt/nvm/etc/bash_completion.d/nvm" ] && . "/usr/local/opt/nvm/etc/bash_completion.d/nvm"  # This loads nvm bash_completion

# You may need to manually set your language environment
export LANG=en_US.UTF-8
export LC_ALL=en_US.UTF-8

# Preferred editor for local and remote sessions
if [[ -n $SSH_CONNECTION ]]; then
    export EDITOR='micro'
else
    export EDITOR='micro'
fi

# Heroku autocomplete setup
HEROKU_AC_ZSH_SETUP_PATH=~/Library/Caches/heroku/autocomplete/zsh_setup
if [ -f $HEROKU_AC_ZSH_SETUP_PATH ]; then
    source $HEROKU_AC_ZSH_SETUP_PATH;
fi

# Source local gitignored files (not tracked by git)
if [ -d $DOTFILES/local ]; then
    for file in $DOTFILES/local/*.zsh; do
        source "$file"
    done
fi

